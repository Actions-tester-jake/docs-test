= rpk debug bundle
:description: The rpk debug bundle command generates a diagnostics bundle for troubleshooting Redpanda deployments.
:rpk_version: v23.1.6 (rev cc47e1ad1)

The `rpk debug bundle` command collects environment data that can help debug and diagnose issues with a Redpanda cluster, a broker, or the machine it`s running on. It
then bundles the collected data into a ZIP file, called a diagnostics bundle.

NOTE: In Kubernetes, you must execute the `rpk debug bundle` command inside a container that's running a Redpanda broker.

== Usage

[,bash]
----
rpk debug bundle [flags]
----

== Flags


[width="100%",cols="34%,33%,33%",]
|===
|*Value* |*Type* |*Description*

|--admin-api-tls-cert |string |The certificate to be used for TLS
authentication with the Admin API.

|--admin-api-tls-enabled |- |Enable TLS for the Admin API (not necessary
if specifying custom certs).

|--admin-api-tls-key |string |The certificate key to be used for TLS
authentication with the Admin API.

|--admin-api-tls-truststore |string |The truststore to be used for TLS
communication with the Admin API.

|--api-urls |string |The address to the broker`s Admin API. Defaults to
the one in the config file.

|--brokers |strings |Comma-separated list of broker `<ip>:<port>` pairs,
for example
`--brokers 192.168.78.34:9092,192.168.78.35:9092,192.179.23.54:9092`.
Alternatively, you may set the `REDPANDA_BROKERS` environment variable
with the comma-separated list of broker addresses.

|--config |string |Redpanda configuration file. If not set, rpk searches
for the file in the default locations.

|--controller-logs-size-limit |string |Sets the limit of the controller
log size that can be stored in the bundle. Multipliers are also
supported, e.g. 3MB, 1GiB (default "20MB").

|-h, --help |- |Display documentation for `rpk debug bundle`.

|--logs-since |string |Include log entries on or newer than the
specified date in journalctl date format, for example YYYY-MM-DD.

|--logs-size-limit |string |Read the logs until the given size is
reached. Multipliers are also supported, e.g. 3MB, 1GiB (default
"100MiB").

|--logs-until |string |Include log entries on or older than the
specified date in journalctl date format, for example YYYY-MM-DD. +
*Not supported in Kubernetes*

|--metrics-interval |duration |The amount of time to wait before
capturing the second snapshot of the metrics endpoints, for example
`30s` (30 seconds) or `1.5m` (90 seconds). This interval is useful
because some metrics are counters that need values at two points in
time. Default: `12s`. +
*Kubernetes only*

|--namespace |string |The Kubernetes namespace in which the Redpanda
cluster is running. Default: `redpanda` +
*Kubernetes only*.

|--password |string |SASL password to be used for authentication.

|--sasl-mechanism |string |The authentication mechanism to use.
Supported values: `SCRAM-SHA-256` and `SCRAM-SHA-512`.

|--timeout |duration |The amount of time to wait for child commands to
execute, for example `30s` (30 seconds) or `1.5m` (90 seconds). Default:
`10s`.

|--tls-cert |string |The certificate to be used for TLS authentication
with the broker.

|--tls-enabled |- |Enable TLS for the Kafka API (not necessary if
specifying custom certs).

|--tls-key |string |The certificate key to be used for TLS
authentication with the broker.

|--tls-truststore |string |The truststore to be used for TLS
communication with the broker.

|--upload-url |string |The URL to which to upload the diagnostics
bundle. This URL is usually given to you by the Redpanda support team to
help you debug your deployment. +
*Kubernetes only*

|--user |string |SASL user to be used for authentication.

|-v, --verbose |- |Enable verbose logging. Default: `false`.
|===


== Result

The files and directories in the diagnostics bundle differ depending on the environment in which Redpanda is running.

[tabs]
====
Linux::
+
--
include::reference:partial$bundle-contents-linux.adoc[]

--
Kubernetes::
+
--
include::reference:partial$bundle-contents-k8s.adoc[]

--
====

== Examples

=== Collect Redpanda logs from a specific timeframe

----
rpk debug bundle --logs-since "2022-02-01" --logs-size-limit 3MiB
----

=== Use a custom Kubernetes namespace

----
rpk debug bundle --namespace redpanda-namespace
----
